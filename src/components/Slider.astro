---
import { storyblokEditable } from '@storyblok/astro';
import Slide from './Slide.astro';

const { blok } = Astro.props;
---

<div class="slider-container" {...storyblokEditable(blok)}>
  <div class="slider">
    {blok.slides?.map((slide) => (
      <Slide blok={slide} />
    ))}
  </div>
</div>

<script>
  let currentSlide = 0;
  const slides = document.querySelectorAll('.slide');
  const totalSlides = slides.length;

  function showSlide(index) {
    slides.forEach((slide, i) => {
      slide.style.display = i === index ? 'flex' : 'none';
    });
  }

  function nextSlide() {
    currentSlide = (currentSlide + 1) % totalSlides;
    showSlide(currentSlide);
  }

  // Initial anzeigen
  showSlide(0);

  // Auto-advance alle 5 Sekunden
  setInterval(nextSlide, 5000);
</script>

<style>
  .slider-container {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
  }
  
  .slider {
    width: 100%;
    height: 100%;
    position: relative;
  }
</style>