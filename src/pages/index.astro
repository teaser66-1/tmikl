---
import { useStoryblokApi } from '@storyblok/astro';
import StoryblokComponent from '@storyblok/astro/StoryblokComponent.astro';

const storyblokApi = useStoryblokApi();

try {
  const { data } = await storyblokApi.get('cdn/stories/home', {
    version: 'draft',
  });
  
  var story = data.story;
} catch (error) {
  console.error('Storyblok Error:', error);
}
---

<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <title>Home</title>
</head>
<body>
  {story ? (
    <StoryblokComponent blok={story.content} />
  ) : (
    <div>
      <h1>Willkommen</h1>
      <p>Storyblok ist noch nicht verbunden.</p>
      <a href="/slider">Zum Slider</a>
    </div>
  )}
</body>
</html>